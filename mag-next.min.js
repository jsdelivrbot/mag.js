/* MagJS Next 1.1.7 - Temp: will remove */
(function(e,p){function l(a,e){if(d[a]&&!e)return d[a];var b=mag.doc.getElementById(a);return b&&(d[a]=b),d[a]}var q=0,f=["#KEY",".KEY","KEY"],w=function(a){if("string"==typeof a){var e=mag.utils.items.getItemVal(~mag.mod.runningViewInstance||mag.utils.runningEventInstance),b;e=mag.getNode(e)||mag.doc;for(var d in f){var B=f[d].replace("KEY",a);if(b=e.querySelector(B),b)break}if(b)return b}return a},u=function(a,e,b){var d,B=[],c=a.cloneNode(1),n=[],h=[],k=function(g){var z=a;g=g||{};var f;g.key&&
(f=g.key+"-"+k.id);var x=g.key?g.key+"-"+k.id:k.id;if(h[x]||(h[x]="object"==typeof b?mag.utils.copy(b):b),"object"==typeof g&&(g=mag.utils.extend(h[x],g)),f&&!B[f]?z=B[f]=c.cloneNode(1):f&&B[f]&&(z=B[f]),d&&d==z[m].scid)throw Error("MagJS Error - recursive call:"+d);z[m]=z[m]||{};mag._cprops[x]&&"object"==typeof g&&(g.children=mag._cprops[x]);k.props=g;k.key=f;if(n[x]!=mag.utils.toJson(g))try{var t=e(g);d=z[m].scid=x;n[x]=mag.utils.toJson(g);var v=mag.fill.id;v&&v[m]&&v[m].scid&&(z[m].pscid=v[m].scid);
mag.fill.setId(z);mag.fill.run(z,t)}finally{mag.fill.setId(v),d=0}return z};return k.id=++q,k.element=c,k};e.mag=function(a,b,e){if(a=w(a),b=w(b),e=e||{},mag.utils.isHTMLEle(b)&&mag.utils.isHTMLEle(a))b[m]||mag.fill.run(b,a);else{if("function"==typeof b&&mag.utils.isHTMLEle(a)){try{u(a.cloneNode(1),b,e)()}catch(x){}return u(a,b,e)}return M(-1,l(mag._isNode(a)),b,e)}};var m="__magnum__";mag.MAGNUM=m;mag.rafBounceIds=[];mag._cprops=[];mag.doc=p;var a={values:[],attributes:[],elementMatcher:[]},d=[];
q=0;mag._isNode=function(a){return mag.utils.isHTMLEle(a)&&(!a.id&&(a.id=++q),d[a.id]=a,a=a.id),a};mag.module=function(a,e,d){d=d||{};a=mag._isNode(a);var c=d.key;var g;c=c?a+"-"+c:a;c=(g=mag.utils.items.isItem(c)?mag.utils.items.getItem(c):mag.utils.getItemInstanceId(c),g);return(a=b(d,c,e,a))?M(c,a,e,mag.utils.copy(d)):void 0};var b=function(a,b,e,d){a.retain||mag.mod.clear(b);var c=l(d);if(mag.mod.submodule(d,b,e,a),H(b,d),!N(b,c))return mag.redraw(c,b,1).then(function(){K(b,c)}),c},c=function(a,
b){return 0>b||b!=mag.utils.items.getItem(a)?a==mag.mod.getId(b):!0},h=[];mag.begin=function(a){"undefined"==typeof h[a]?h[a]=1:h[a]++};mag.end=function(a){if(1<h[a])h[a]--;else{h[a]=0;var b=mag.utils.items.getItemVal(a);mag.redraw(l(b),a)}};mag.redraw=function(a,b,e){if(!h[b]){if(!a||"undefined"==typeof b)throw Error("Mag.JS - Id or node invalid: "+mag.utils.items.getItemVal(b));if(!c(a.id,b))return{then:function(a){return a()}};if(e&&mag.fill.configs.splice(0,mag.fill.configs.length),e&&mag.mod.clear(b),
mag.mod.runningViewInstance==b)throw Error("Mag.JS - recursive call:"+b);return mag.utils.scheduleFlush(b,S(a,b,e))}};mag.hookin=function(b,e,d){a[b].push({context:{},handler:d,key:e})};mag.hook=function(b,e,d){for(var c=0,g=a[b].length;c<g;c++)mag.utils.callHook(a,e,b,c,d)};var k={},I=[],D=[],O=function(a,b,e){var d=mag.getNode(mag.mod.getId(a)),c=function(){if(!mag.utils.callLCEvent("onunload",mag.mod.getState(a),d,a)){mag.clear(a);var c=0;var g=d.id;var k=[],h;for(h in mag.fill.cached)-1<h.indexOf('id("'+
g+'")/')&&-1<h.indexOf("-config")&&mag.fill.cached[h].configContext&&k.push({path:h.split("-config")[0],controller:mag.fill.cached[h].configContext,handler:mag.fill.cached[h].configContext.onunload});for(;g=k&&k[c];c++)g.controller.onunload&&(g.handler.call(g.controller,d,g.path),g.controller.onunload=0);b[a]&&(b[a].length=0);e&&(mag.fill.removeNode(d),mag.mod.remove(a))}};mag.mod.getState(a).onbeforeunload?mag.utils.callLCEvent("onbeforeunload",mag.mod.getState(a),d,a,0,function(){c()}):c()},L=function(a,
b){D[a]=D[a]||[];var e=D[a].push(b);return mag.utils.onLCEvent("didupdate",a,function(b,e){var d=[mag.utils.copy(e),mag.utils.copy(b)];if(mag.utils.toJson(d)!=mag.utils.toJson(I[a])){for(var c=$jscomp.makeIterator(D[a]),g=c.next();!g.done;g=c.next())g=g.value,g(b,e,l(mag.mod.getId(a)),I[a]);I[a]=d}}),function(){return D[a].splice(e-1,1)}},E=[],P=function(a,b,e,d,c){var g=mag.utils.items.getItem(b);b=mag._isNode(a);b=mag.utils.toJson(mag.mod.getProps(g));(K(g,a),!mag.mod.exists(g)||!mag.utils.callLCEvent("willgetprops",
mag.mod.getState(g),a,g,0,e))&&(mag.mod.submodule(a.id,g,d,e),b!=mag.utils.toJson(mag.mod.getProps(g))&&(c=1),H(g,a.id),N(g,a)||mag.redraw(a,g,c).then(function(){K(g,a)}))},M=function(a,b,e,d){E[a]=E[a]||[];var c=function(a,b,e,d,g){"object"==typeof g&&(d=mag.utils.merge(mag.utils.copy(d),g),g=0);0>a&&!g&&(g=1);g=b.id+(d.key?"."+d.key+".":"")+(g||"");!k[g]||d.key||~c._id||(g+=++q);b=k[g]=k[g]||b.cloneNode(1);if(b.id=g,mag.utils.items.isItem(g))return P(b,g,d,e),b;var h=mag.utils.getItemInstanceId(b.id);
return 0>a?c._id=h:E[a].push({instanceId:h,subscribe:L.bind({},h)}),P(b,g,d,e),b}.bind({},a,b,e,d);return c._id=a,c.clones=function(){return E[c._id]},c.destroy=function(a){O(c._id,c.clones,a)},c.getId=function(){return c._id},c.rafBounce=function(a){return a?mag.rafBounceIds[c._id]=1:!1===a&&(mag.rafBounceIds[c._id]=0),!!mag.rafBounceIds[c._id]},c.draw=function(a){return mag.redraw(b,c._id,a)},c.getState=function(){return mag.mod.getState(c._id)},c.getProps=function(){return mag.mod.getProps(c._id)},
c.subscribe=function(a){return L(c._id,a)},c},H=function(a,b){var c=function(a,b){l(b)?mag.redraw(l(b),a):mag.utils.items.isItem(b)&&mag.clear(a)}.bind({},a,b);mag.mod.setFrameId(a,c)};mag.clear=function(a){mag.utils.items.removeItem(a);mag.mod.clear(a);mag.fill.clearCache(mag.mod.getId(a))};var S=function(a,b,e){return function(a,b,e){if(l(a.id,1),c(a.id,b)&&a){var d=mag.mod.getState(b);if(!mag.utils.callLCEvent("isupdate",d,a,b)){if(mag.mod.iscached(b)&&!e)return 0;if(!mag.utils.callLCEvent("willupdate",
d,a,b)){mag.mod.callView(a,b);var g=mag.fill.id;mag.fill.setId(a.id);mag.fill.run(a,d);mag.fill.setId(g);g=a.id;var h=mag.fill.configs,k;for(k in h)k.startsWith('id("'+g+'")/')&&h[k]();mag.utils.callLCEvent("didupdate",d,a,b);e||mag.mod.iscached(b)}}}}.bind({},a,b,e)},N=function(a,b){return mag.utils.callLCEvent("willload",mag.mod.getState(a),b,a,1)},K=function(a,b){var c=mag.utils.items.getItemVal(a);if(l(c)&&mag.mod.exists(a))return mag.utils.callLCEvent("didload",mag.mod.getState(a),b,a,1)};mag.getNode=
l})(window||global||this,document);
(function(e){function p(a,d){var b=a.name;if("undefined"==typeof a.object[a.name]&&"_"!=b[0]){var c=e.fill.find(d,b),h="$"===b[0],k=[];return c.length?(c.forEach(function(b){var c;if(!b||!b.type||~["submit","button"].indexOf(b.type))"undefined"==typeof a.oldValue&&"undefined"==typeof a.object[a.name]&&b&&!~["submit","button"].indexOf(b.type)&&1==b.childNodes.length&&b.childNodes[0].textContent.trim()&&(c={_text:b.childNodes[0].textContent.trim()});else if(b.value&&0<b.value.length)if("checkbox"!=
b.type&&"radio"!=b.type)c={_value:b.multiple&&Array.prototype.map.call(b.selectedOptions,function(a){return a.value})||b.value};else if(b.checked&&(c={},c._checked=!0),h)c?c._value=b.value:c={_value:b.value};else{var e=d.querySelectorAll("[name="+b.name+"]");if(e.length){e=$jscomp.makeIterator(e);for(var f=e.next();!f.done;f=e.next())f=f.value,f.checked&&(c?c._value=f.value:c={_value:f.value})}}c?k.push(c):b&&!b.hasChildNodes()&&k.push(q)}),0===k.length?void 0:h?k:k[0]&&"undefined"!=typeof k[0]._value?
k[0]._value:k[0]&&k[0]._text?k[0]._text:k[0]):q}if("_"==b[0]){b=b.substr(1);if(d.length){k=[];for(c in d){var f=d[c],l=f[b];"undefined"==typeof l&&(l=f.getAttribute(b));k.push(l)}return k}l=d[b];return"undefined"==typeof l&&(l=d.getAttribute(b)),l}}var l=[],q=e.MAGNUM,f={runningViewInstance:-1,innerMods:[],cache:[],getState:function(a){return l[a][1]},setState:function(a,e){l[a][1]=e},getView:function(a){return l[a][0]},getProps:function(a){return l[a]&&l[a][2]},setProps:function(a,e){return l[a][2]=
e},remove:function(a){l[a]&&(l[a]=0)},getId:function(a){return l[a]&&l[a][3]},exists:function(a){return"undefined"!=typeof l[a]},setFrameId:function(a,e){l[a][4]=e},getFrameId:function(a){return l[a][4]},getMod:function(a){return l[a][5]}},w=function(a,e){for(var b in e=e||a,a){var c=a[b];"function"!=typeof c||~["controller","view"].indexOf(b)||(a[b]=c.bind(e))}return a};f.submodule=function(a,d,b,c){if(l[d])return c.key&&c.key==f.getProps(d).key?f.setProps(d,e.utils.copy(e.utils.merge(f.getProps(d),
c))):f.setProps(d,c),l[d];b=e.utils.copy(b);w(b,b);l[d]=[0,0,0,0,0,0];f.setProps(d,c);c=function(a,c,e){b.element=e;b.state=c;b.props=f.getProps(a);b.view&&b.view.call(b,c,b.props,e)}.bind({},d);return l[d][0]=c,l[d][3]=a,l[d][1]=new function(c){return b.props=f.getProps(d),b.state=c,b.element=e.getNode(a),(b.controller||function(){}).call(c,b.props)||c}(e.proxy({},m.bind({},"state",d))),l[d][5]=b,l[d]};var u=[],m=function(a,d,b){if("get"!=b.type||"props"==a||~e.fill.ignorekeys.indexOf(b.name.toString())||
"undefined"!=typeof b.oldValue)"set"==b.type&&"props"!=a&&b.object[b.name]&&b.object[b.name].draw&&"function"==typeof b.object[b.name].draw&&(f.innerMods[f.getId(d)]=[b.name,b.object[b.name]]);else{a=e.getNode(f.getId(d));if(b.path&&"/"==b.path[0]){var c=a;var h=b.path.split("/");h=$jscomp.makeIterator(h);for(var k=h.next();!k.done;k=h.next())if(k=k.value)k=e.fill.find(c,k),k.length&&(c=k)}c&&"$"!=b.path.split("/").pop()[0]&&(c=c[0]);a=p(b,c?c:a);if(null!==a&&"object"==typeof a&&b.object&&e.utils.merge(a,
b.object[b.name]),a)return f.cached[d]=0,a}a=f.getFrameId(d);"function"==typeof a&&"set"==b.type&&(cancelAnimationFrame(u[d]),u[d]=requestAnimationFrame(a))};f.iscached=function(a){var d=e.utils.toJson([f.getProps(a),f.getState(a)]);return a in f.cache&&f.cache[a]==d||void(f.cache[a]=d)};f.clear=function(a){~a&&f.cache[a]&&f.cache.splice(a,1)};f.cached=[];f.callView=function(a,d){f.runningViewInstance=d;f.cached[d]||(e.props.attachToArgs(d,f.getState(d),a),f.cached[d]=1);try{f.getView(d)(f.getState(d),
a)}finally{f.runningViewInstance=-1}};e.mod=f})(mag);
(function(e){function p(a,c,d,k){(a[u]=a[u]||{},a[u].eventOnFocus)||(c=function(b,c,d){var h=~["radio","checkbox"].indexOf(a.type);if(this[u].dirty||(this[u].dirty=1),a.selectedOptions)var k=Array.prototype.map.call(a.selectedOptions,function(a){return a.value});h?"_checked"in c||w in c?c._checked=this.checked:this.checked&&(c[d]=this.value):void 0===c[w]?void 0!==c._text&&(c._text=k||this.value):c[w]=k||this.value;e.redraw(b,e.utils.items.getItem(b.id))}.bind(a,k,c,d),a.addEventListener("click",
c),a.addEventListener("input",c),a.addEventListener("change",c),a.addEventListener("focus",c),a[u].eventOnFocus=1)}function l(a){return a&&~["INPUT","SELECT","TEXTAREA"].indexOf(a.tagName)}function q(a){for(var b in a)if(l(a[b]))return a[b];return!1}var f={},w="_value",u=e.MAGNUM,m=function(a,c,d,k){d=d.toString().split(".");if(3<=d.length){for(var b=1;b<d.length;b++){var f=d[b],h=d[b+1];f=e.fill.find(Array.isArray(k)?k[0]:k,f);if(h&&!isNaN(+h))k=f[h];else if(f&&f.length&&h&&b+2<d.length)k=e.fill.find(f[0],
h);else if(f&&f.length&&(k=f,b+2==d.length))break}k=Array.isArray(k)?k[0]:k;d=e.fill.find(k,c)}else d=parseInt(d.pop()),d=isNaN(d)?0:d,d=e.fill.find(k[d]?k[d]:k,c);b=[];for(var m in d)h=d[m],l(h)&&(b.push(h),p(h,a,c,k));return!!b.length&&(1==b.length?b[0]:b)},a=function(a,c,d,f){var b=d[c];~[w,"_checked","_text"].indexOf(c)&&"string"==typeof a&&(c=a.split(".").pop());var k=e.fill.find(f,c);k=q(k);if("function"!=typeof b&&k){var h=m.bind({},d,c,a,f);h();Object.defineProperty(d,c,{configurable:!0,get:function(){var c=
h();return c&&"undefined"!==c.value&&c[u]&&c[u].dirty&&c.value!==b?(b=c.value,e.redraw(f,a,1),c.value):b},set:function(a){var c=h();c&&"undefined"!==c.value&&c.value!==a&&a!==b&&(c.value=a,b=a)}})}},d=function(b,c,f){for(var k in c)if(c.hasOwnProperty(k)){var h=c[k];k==w||"object"!=typeof h||e.utils.isHTMLEle(h)?a.bind({},b,k,c,f)():(e.utils.isObject(h)&&e.utils.isEmpty(h)&&(h[w]=""),d(b+"."+k,h,f))}};f.attachToArgs=d;e.props=f})(mag);
(function(e){var p={copy:function(a){return Object.assign({},a)},merge:function(){return Object.assign.apply({},arguments)},extend:function(a,e,b){for(var c in e)if(void 0===e[c])delete e[c];else if(b&&p.isObject(e[c]))return p.extend(a[c],e[c]);return p.merge(a,e)},isObject:function(a){return"Object]"==Object.prototype.toString.call(a).substr(-7)}},l=function(a,e){return"function"==typeof e?""+e:e};p.toJson=function(a){return JSON.stringify(a,l)};p.isEmpty=function(a){for(var e in a)if(a.hasOwnProperty(e))return 0;
return 1};p.isHTMLEle=function(a){return a&&1===a.nodeType};p.callHook=function(a,e,b,c,f,k){a[b][c].key==e&&(k={v:f.value,k:f.key},f.change=!1,a[b][c].handler.call(a[b][c].context,f),{v:f.value,k:f.key}!==k&&(f.change=!0))};var q,f,w=[];p.scheduleFlush=function(a,d){return new Promise(function(b){e.rafBounce||e.rafBounceIds[a]?(cancelAnimationFrame(f),f=requestAnimationFrame(function(){d();b();f=0})):(d&&w.push(d),!q&&w.length?q=requestAnimationFrame(function(c){for(q=0;w.length&&!(16.6<performance.now()-
c);)w.shift()();w.length?p.scheduleFlush(a).then(function(){return b()}):b()}):b())})};var u=[];p.onLCEvent=function(a,e,b){var c=a+"-"+e;u[c]=u[c]||[];var d=u[c].push(b);return function(){return u[c].splice(d-1,1)}};p.callLCEvent=function(a,d,b,c,f,k){var h;p.runningEventInstance=c;var l=e.mod.getProps(c),m=e.mod.getMod(c),q=m[a]?m:d[a]&&d;q&&(h=q[a].call(m,b,l,c,k),f&&(q[a]=0));a=a+"-"+c;if(u[a]){b=$jscomp.makeIterator(u[a]);for(c=b.next();!c.done;c=b.next())c=c.value,c(d,l);f&&(u[a]=0)}return(p.runningEventInstance=
-1,!1===h)||void 0};var m={i:[],isItem:function(a){return~m.i.indexOf(a)},setItem:function(a){return m.i[m.i.length]=a},getItem:function(a){return m.i.indexOf(a)},getItemVal:function(a){return m.i[a]},removeItem:function(a){return m.i.splice(m.i.indexOf(a),1)}};p.items=m;p.getItemInstanceIdAll=function(){return m.i};p.getItemInstanceId=function(a){return m.isItem(a)?m.getItem(a):(m.setItem(a),m.getItem(a))};e.utils=p})(mag);
(function(e,p,l){function q(a,b){return a[n]=a[n]||{},(!a[n].uid||b)&&(a[n].uid=++V),a[n].uid}function f(a,b){var c=q(a);return J[c]&&!b?J[c]:J[c]=d(a)}function w(a,b){var c=q(a);return F[g.id]=F[g.id]||[],F[g.id][c]&&F[g.id][c]==b?1:void(F[g.id][c]=b)}function u(a){return a.id&&e.utils.items.isItem(a.id)?a:a.parentNode?u(a.parentNode):void 0}function m(a,b){if(a[n]&&a[n].scid&&!a[n].pscid)b=a;else if(b)return b;return a.parentNode?m(a.parentNode,b):void 0}function a(a){for(var b="",c=u(a),e=a,t=
1;e=e.previousElementSibling;)++t;return c&&(b+='id("'+(c.id||c.tagName)+'")'),b+="/"+a.tagName+"["+t+"]",b}function d(a){if(a.id&&g.id===a.id||g.id===a)return'id("'+(a.id||a.tagName)+'")';if(a===e.doc.body)return a.tagName;var b=0;if(a.parentNode)for(var c,t=a.parentNode.childNodes,f=0,r=t.length;f<r;f++){if(c=t[f],c===a)return d(a.parentNode)+(a.tagName?"/"+a.tagName+"["+(b+1)+"]":"");1===c.nodeType&&c.tagName===a.tagName&&b++}}function b(a){var b=d(a);a&&y[b+"-config"]&&y[b+"-config"].configContext&&
"function"===typeof y[b+"-config"].configContext.onunload&&(y[b+"-config"].configContext.onunload(y[b+"-config"].configContext,a,b),delete y[b+"-config"],delete g.configs[b]);a.parentNode&&a.parentNode.removeChild(a);e.mod.cached[e.utils.items.getItem(g.id)]=0}function c(a){return(a=a&&parseInt(a.split("[").pop().slice(0,-1)))?parseInt(a)-1:0}function h(a){var b=[];return a.replace(/\[(.+?)\]/g,function(a,c){b.push(c)}),b}function k(a){return a&&~a.indexOf("id(")&&a.split('id("')[1].split('")')[0]}
function I(a,b,c){var e=q(a);if(J[e])return J[e];if(R[e])return R[e];b=+c==+c?b+c:b;var d="object"==typeof g.id?g.id.tagName:g.id;c="string"==typeof c?c.split(")")[1]+"/":"/";return R[e]=a[n].xpath='id("'+d+'")'+c+a.tagName+"["+b+"]"}function D(a){return a&&a[n]&&a[n].isItem?a:a.parentNode?D(a.parentNode):void 0}function O(a,b){if(!w(a,b.outerHTML)&&(!b.id&&!a.childNodes[0]||b.id&&!e.doc.getElementById(b.id)||a.firstChild&&!a.firstChild.isEqualNode(b))){var c=e.utils.items.getItem(b.id);if(~c&&a.hasChildNodes()){var d=
e.utils.items.getItem(g.id),t=a.cloneNode(1);t[n]={childof:d};e.mod.getProps(c).children=t}else b[n]&&b[n].scid&&(t=a.cloneNode(1),t[n]={childof:b[n].scid},e._cprops[b[n].scid]=t);for(;a.lastChild;)a.removeChild(a.lastChild);if(b[n]&&b[n].childof!==l){a.innerHTML=b.innerHTML;var f=b[n].childof;e._cprops[f]||(L(a,f),e.utils.onLCEvent("willupdate",f,function(){L(a,f)}))}else a.appendChild(b)}}function L(a,b){var c=g.id;g.setId(e.mod.getId(b));g.run(a,e.mod.getState(b));g.setId(c)}function E(a,b,d,k){var t;
c(d);if(b&&e.utils.isHTMLEle(b))a=void O(a,b);else if("function"==typeof b){var r=f(a);d=h(r);a=(k=b(d.join("."),r))&&e.utils.isHTMLEle(k)?void(O(a,k),a[n]=a[n]||{},a[n].isItem=!0,a[n].dataPass={index:d},b.draw&&b.draw()):E(a,k,r)}else if("object"==typeof b){e.mod.innerMods[g.id]&&b[e.mod.innerMods[g.id][0]]&&!b[e.mod.innerMods[g.id][0]].draw&&e.mod.innerMods[g.id][1].destroy();for(var v in b){var A=b[v];A===l?A="":null===A&&-1===["onunload"].indexOf(v)?(a[n].detached=a[n].detached||[],a[n].detached[v]=
1,M(a,v)):a[n].detached&&a[n].detached[v]&&(P(a,v),a[n].detached[v]=0);"_"===v[0]&&"_"!==v[1]&&(t=t||{},t[v.substr(1)]=A)}t&&B(a,t,d,k);for(r in b)t=b[r],~g.ignorekeys.indexOf(r)||"_"===r[0]||(k=x(a,r),v={key:r,value:t,node:a},e.hook("values","*",v),v.change&&(t=v.value),g.run(k,t,d+"/"+r));a=void 0}else a=E(a,{_text:b},d);return a}function P(a,b){x(a,b).forEach(function(a){var b=q(a);if(b in G){for(var c in G[b])a.appendChild(G[b][c]);delete G[b]}})}function M(a,c){var d=0,t=1,f=function(a){if(++d==
t)for(;a.lastChild;)b(a.lastChild)},g=function(a,b){var c;a.id&&e.utils.items.isItem(a.id)&&(c=e.utils.items.getItem(a.id));c&&e.mod.getState(c).onbeforeunload?(t++,e.utils.callLCEvent("onbeforeunload",e.mod.getState(c),a,c,0,function(){c&&e.utils.callLCEvent("onunload",e.mod.getState(c),a,c);b()})):(c&&e.utils.callLCEvent("onunload",e.mod.getState(c),a,c),b())};x(a,c).forEach(function(a){var b=q(a);a.children.length&&(G[b]=H(a.children));for(var c in G[b])g(G[b][c],function(){f(a)});f(a)})}function H(a){if(null==
a.length&&(a=[a]),!Array.isArray(a)){var b=[];for(var c=0;c<a.length;c+=1)a[c]&&b.push(a[c]);a=b}return a}function S(b,f){return function(b,f,t){var v=a(f),h=k(v);h||(h=m(f));var l=g.id;g.setId(h);var A=D(f),T=A&&d(A),q=c(T);v=c(v);A={path:T,node:A,data:((A||{})[n]||[]).dataPass,index:q};g.setId(l);var p=e.doc.getElementById(h),Q=e.utils.items.getItem(h);b=b.call(~Q?e.mod.getMod(Q):p,t,v,f,A);h&&p&&(b&&b.then?b.then(function(a){e.redraw(p,Q,1);return a}):e.redraw(p,Q,1));return b}.bind({},f,b)}function N(a,
b){function c(c){var e=a[n].eventHandlers[b],d;for(d in e)!1===S(a,e[d])(c)&&c.preventDefault()}a.removeEventListener(b,c);a.addEventListener(b,c)}function K(a,b,c,e){b=b.substr(2).toLowerCase();e=("string"==typeof e?e.split("/")[0]:"")+"-"+c[n].uid;var d=c[n].events=c[n].events||[],f=c[n].eventHandlers=c[n].eventHandlers||[];f[b]=f[b]||[];f[b][e]=a;d[b]||(d[b]=1,N(c,b))}function B(a,b,d,g){var k=c(d),r;for(r in y[q(a)]=y[q(a)]||[],b)if("text"!==r&&"html"!==r)if(0==r.indexOf("on"))K(b[r],r,a,g);else if("config"==
r){d=f(a);k=c(d);var t=!0;y[d+"-config"]?t=!1:y[d+"-config"]={};var h=y[d+"-config"].configContext=y[d+"-config"].configContext||{};p[d]=function(a,b){return function(){return a.apply(a,b)}}(b[r],[a,t,h,k])}else d={key:r,value:b[r],node:a},(e.hook("attributes",r,d),d.change&&(r=d.key,b[r]=d.value),y[q(a)]&&y[q(a)][r]==b[r])||(null===b[r]?a.removeAttribute(r):"value"==r&&a.multiple&&a.selectedOptions&&Array.isArray(b[r])?(a.value=b[r],b[r].forEach(function(b){Array.from(a.options).find(function(a){return a.value==
b}).selected=!0})):r in a?"style"==r?a[r].cssText=b[r]:a[r]=b[r]:a.setAttribute(r,b[r]+""),y[q(a)][r]=b[r]);z(a,b.text);U(a,b.html)}function z(a,b){if(a&&null!=b&&!w(a,b)){var c=b+"";if("INPUT"!==a.nodeName)"SELECT"!==a.nodeName&&(a.firstChild?a.firstChild.textContent=c:a.appendChild(a.ownerDocument.createTextNode(c)));else if(!~["radio","checkbox"].indexOf(a.type))c!=a.value&&(a.value=c);else if(a.name){var d=e.getNode(g.id).querySelectorAll("[name="+a.name+"]");if(1<d.length){d=$jscomp.makeIterator(d);
for(var f=d.next();!f.done;f=d.next())if(f=f.value,f.value==c){f.checked=!0;break}}}"SELECT"===a.nodeName&&c&&(a.value=c)}}function U(a,b){var c="";if(Array.isArray(b))for(var d in b)w(b[d],b[d].outerHTML)||(a.children[d]?a.replaceChild(b[d],a.children[d]):a.appendChild(b[d]));else return e.utils.isHTMLEle(b)?(c=b.outerHTML,w(a,c))?void 0:void a.appendChild(b):void(!a||null==b||w(a,b)||(a.innerHTML=b))}function x(a,b,c){var d=[];if(a){var f=a.childNodes;if(f)for(var k=0;k<f.length;k+=1){var h;if(h=
1===f[k].nodeType)h=f[k],h=g.id&&(e.utils.isHTMLEle(g.id)&&h[n]&&h[n].scid||h.id&&h.id!=g.id&&e.utils.items.isItem(h.id))?0:1;h&&d.push(f[k])}}f=[];k=b;h="$"===b[0];"$"===k[0]&&(k=k.substr(1));for(var l=0;l<d.length;l+=1){var m=d[l],t=k,v=" "+m.className+" ";(m.id===t||~v.indexOf(" "+t+" ")||m.name===t||m.nodeName.toLowerCase()===t.toLowerCase()||m.getAttribute("data-bind")===t)&&f.push(d[l])}if(!f.length||h)for(l=0;l<d.length&&(f=f.concat(x(d[l],b,!0)),!f.length||h);l++);c||f.length||(a={key:b,value:f,
node:a},e.hook("elementMatcher",b,a),a.change&&(f=a.value));return f}var g={cached:[],ignorekeys:"toString draw then hasOwnProperty willgetprops onbeforeunload Symbol(Symbol.toStringTag) nodeType toJSON onunload willupdate didupdate didload willload isupdate".split(" ")},y=g.cached,n=e.MAGNUM,J=[],F=[],C={},V=0;g.run=function(a,c,d){var f,k;if(a){null==c&&(c={_text:""});var h=H(a);if(k=Array.isArray(c),k){if(C[d]&&0===h.length&&(C[d].parent.insertAdjacentHTML("beforeend",C[d].node),h=H(C[d].parent.children)),
!h.length)return;a=h[0].parentNode;C[d]||(C[d]={node:h[0].cloneNode(1).outerHTML,parent:a});for(var m=e.doc.createDocumentFragment(),p=0;h.length<c.length;)C[d]?(a.insertAdjacentHTML("beforeend",C[d].node),f=a.lastChild):f=h[0].cloneNode(1),I(f,++p,d),h.push(f),m.appendChild(f);a.appendChild(m);f=c.map(function(a){return a&&a._key});if((h.length==c.length||-1!==f.indexOf(l))&&(c=c.map(function(a,b){if("object"==typeof a){if(h[b][n]=h[b][n]||{},h[b][n].__key&&"undefined"==typeof a._key)return a._key=
h[b][n].__key,a;"undefined"==typeof a._key&&(a._key=n+b);h[b][n].__key=a._key}return a})),h.length>c.length)if(0===c.length||"object"!=typeof c[0])for(;h.length>c.length;)f=h.pop(),(a=f.parentNode)&&b(f);else{var q=[],t=c.map(function(a){return a._key});h=h.filter(function(a){var c;return("undefined"==typeof a[n]?c=1:(!~t.indexOf(a[n].__key)||~q.indexOf(a[n].__key))&&(q.push(a[n].__key),c=1),c)?(b(a),!1):(q.push(a[n].__key),!0)})}}for(f=0;f<h.length;f++)k?h[f]&&g.run(h[f],c[f],f):(a=I(h[f],f+1,d),
c&&"object"==typeof c&&c.hasOwnProperty("_key")&&!e.utils.isHTMLEle(c)&&(h[f][n].isItem=!0,h[f][n].dataPass=c),E(h[f],c,a,d))}};var R=[],G=[];g.removeNode=b;g.configs=p;g.find=x;g.setId=function(a){g.id=a};g.clearCache=function(a){F[a]&&delete F[a]};e.fill=g})(mag,[]);
(function(e){function p(q,f,p,u){var m=new WeakSet;return new Proxy(q,{get:function(a,d,b){var c=a[d];if("symbol"==typeof d)return c;if("object"!=typeof c||"symbol"==typeof c||null===c||"function"==typeof c||Array.isArray(c)||!e.utils.isObject(c)||c.then||c.draw)d in a||~e.fill.ignorekeys.indexOf(d.toString())||p||"_"==d[0]||(c=e.proxy({},f,p,u+l+d));else if(!m.has(c))return m.add(c),e.proxy(c,f,p,u+l+d);a=f({type:"get",object:a,name:d,path:u,oldValue:Reflect.get(a,d,b)});return"undefined"!=typeof a&&
(c=a==e.MAGNUM?void 0:a),c},deleteProperty:function(a,d){return f({type:"delete",name:d,object:a,oldValue:Reflect.get(a,d)}),Reflect.deleteProperty(a,d)},set:function(a,d,b,c){var e=Reflect.get(a,d,c);return e===b&&"length"!==d||(f({type:"set",name:d,object:a,oldValue:e}),Reflect.set(a,d,b,c))}})}var l="/";e.proxy=function(q,f,w,u){for(var m in q){var a=typeof q[m];Array.isArray(q[m])&&101>q[m].length?q[m]=p(q[m],f):"object"==a&&null!==q[m]&&"symbol"!=typeof m&&"symbol"!=a&&"function"!=a&&e.utils.isObject(q[m])&&
(q[m]=e.proxy(q[m],f,w,u+l+m))}return p(q,f,w,u||l)}})(mag,window||global||this);
